#!/bin/sh
# Script automatically applies gamma to reduce eye strain
# run every 10 minutes with crontab -e 
# */2 * * * * export DISPLAY=:0.0 && $HOME/.local/bin/autored

pkill gammastep
if [[ $1 != "" ]] then
    gammastep -PO $1
    exit
fi

current_hour=$(date +%H)
[ -f /tmp/noautored ] && pkill gammastep && exit 0
case $current_hour in
    00|01|02|03|04|05|06)
        gammastep -PO 3000
        ;;
    07|08|09|10|11)
        pkill gammastep
        ;;
    12|13|14|15|16|17|18|19|20)
        pkill gammastep
        ;;
    21)
        gammastep -PO 6000
        ;;
    22)
        gammastep -PO 4500
        ;;
    23)
        gammastep -PO 3500
        ;;
    *)
        echo "Invalid hour!"
        exit 1
        ;;
esac
